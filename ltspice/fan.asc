Version 4
SHEET 1 880 680
WIRE -608 -288 -608 -320
WIRE -448 -288 -448 -320
WIRE -304 -288 -304 -320
WIRE 656 -96 656 -144
WIRE 656 -96 592 -96
WIRE 592 -80 592 -96
WIRE -608 -64 -608 -96
WIRE 384 -48 384 -80
WIRE 384 -48 272 -48
WIRE 480 -48 384 -48
WIRE -48 -32 -48 -80
WIRE 480 -32 480 -48
WIRE 592 16 592 -16
WIRE 656 16 656 -16
WIRE 656 16 592 16
WIRE 656 48 656 16
WIRE 272 64 272 -48
WIRE -48 80 -48 48
WIRE 176 80 -48 80
WIRE 240 80 176 80
WIRE 272 80 272 64
WIRE 480 96 480 48
WIRE 480 96 304 96
WIRE 240 112 208 112
WIRE 480 128 480 96
WIRE 608 128 480 128
WIRE -48 160 -48 80
WIRE 208 256 208 112
WIRE 304 256 208 256
WIRE 480 256 480 128
WIRE 480 256 384 256
WIRE 656 288 656 144
WIRE -48 320 -48 240
FLAG -448 -208 0
FLAG -448 -320 vcc5
FLAG -48 320 0
FLAG 272 128 0
FLAG 176 80 v-temp
FLAG -304 -208 0
FLAG -304 -320 temp-ref
FLAG 128 112 temp-ref
FLAG 656 288 0
FLAG 656 -144 raw
FLAG -608 -208 0
FLAG -608 -320 v-ref
FLAG -48 -80 v-ref
FLAG 384 -80 vcc5
FLAG -608 16 0
FLAG -608 -96 raw
SYMBOL voltage -448 -304 R0
WINDOW 3 26 104 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value 5
SYMATTR InstName V2
SYMBOL res -64 144 R0
SYMATTR InstName R1
SYMATTR Value 7.5k
SYMBOL res -64 -48 R0
WINDOW 3 -148 -113 Left 2
SYMATTR Value R=1k*(0.0002*temp*temp+0.0537*temp+8.5256)
SYMATTR InstName R3
SYMBOL OpAmps\\opamp2 272 32 R0
SYMATTR InstName U1
SYMATTR Value LM393
SYMBOL res 224 96 R90
WINDOW 0 53 99 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res 400 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 25k
SYMBOL voltage -304 -304 R0
WINDOW 3 26 104 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value 1.75
SYMATTR InstName V1
SYMBOL res 464 -48 R0
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res 640 -112 R0
SYMATTR InstName R_FAN
SYMATTR Value 40
SYMBOL diode 608 -16 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL nmos 608 48 R0
SYMATTR InstName M1
SYMATTR Value 2N7002
SYMBOL voltage -608 -304 R0
WINDOW 3 26 104 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value 4.55
SYMATTR InstName V3
SYMBOL voltage -608 -80 R0
WINDOW 3 26 104 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value 7
SYMATTR InstName V4
TEXT 184 -360 Left 2 !.dc temp 1 120 1
TEXT 184 -392 Left 2 !.lib LM393.lib
TEXT -248 64 Left 2 ;1.69V on ~62C\n1.85V off ~35C
