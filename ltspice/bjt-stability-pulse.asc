Version 4
SHEET 1 1508 680
WIRE 1024 -240 768 -240
WIRE 688 -192 688 -240
WIRE 16 -176 -64 -176
WIRE 400 -176 80 -176
WIRE 688 -96 688 -112
WIRE 864 -96 688 -96
WIRE 688 -32 688 -96
WIRE -64 0 -64 -176
WIRE -64 0 -160 0
WIRE 176 0 -64 0
WIRE 864 0 864 -16
WIRE 336 16 240 16
WIRE 400 16 400 -176
WIRE 400 16 336 16
WIRE 448 16 400 16
WIRE 624 16 528 16
WIRE 176 32 112 32
WIRE -800 112 -800 64
WIRE -672 112 -672 64
WIRE -528 112 -528 64
WIRE -400 112 -400 64
WIRE 864 112 864 64
WIRE -160 224 -160 0
WIRE 464 224 -160 224
WIRE 688 224 688 64
WIRE 688 224 544 224
WIRE 688 256 688 224
WIRE 64 320 64 304
FLAG -528 192 0
FLAG -528 64 RAW
FLAG 208 -16 VCC
FLAG -672 192 0
FLAG -672 64 VCC
FLAG -160 224 fb
FLAG 688 336 0
FLAG 1024 -240 RAW
FLAG 336 16 out
FLAG -800 192 0
FLAG -800 64 -VCC
FLAG 208 48 -VCC
FLAG -400 272 0
FLAG -400 64 ref
FLAG 112 32 ref
FLAG 864 112 0
SYMBOL voltage -528 96 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 24 72 Left 2
SYMATTR Value 5
SYMATTR InstName V1
SYMBOL voltage -672 96 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 30 86 Left 2
SYMATTR Value 5
SYMATTR InstName V3
SYMBOL res 672 240 R0
SYMATTR InstName R3
SYMATTR Value 0.23
SYMBOL res 672 -208 R0
SYMATTR InstName R4
SYMATTR Value 0.1
SYMBOL voltage -800 96 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 30 86 Left 2
SYMATTR Value -5
SYMATTR InstName V2
SYMBOL voltage -400 96 R0
WINDOW 123 60 55 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 24 72 Left 2
SYMATTR Value2 AC 0
SYMATTR Value {Von}
SYMATTR InstName V5
SYMBOL ind 672 -224 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 3µ
SYMBOL OpAmps\\opamp2 208 -48 R0
SYMATTR InstName U1
SYMATTR Value LM358
SYMBOL res 560 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 544 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1m
SYMBOL voltage -400 176 R0
WINDOW 123 45 55 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 41 87 Left 2
WINDOW 0 -88 66 Left 2
SYMATTR Value2 AC 0
SYMATTR Value PULSE({0.001 - Von} 0 100n 100n 100n 1m)
SYMATTR InstName V4
SYMBOL npn 624 -32 R0
SYMATTR InstName Q1
SYMATTR Value TIP122
SYMATTR Prefix X
SYMBOL cap 848 0 R0
SYMATTR InstName C2
SYMATTR Value 2.2µ
SYMBOL res 848 -112 R0
SYMATTR InstName R5
SYMATTR Value 1
SYMBOL cap 80 -192 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 100p
TEXT -712 -80 Left 2 !;ac dec 1000 1 100Meg
TEXT -712 -256 Left 2 !.inc TLV271.LIB
TEXT -712 -224 Left 2 !.inc LM358.LIB
TEXT -704 -128 Left 2 !.tran 100u
TEXT -360 -24 Left 2 !.param Von=0.01
TEXT -712 -192 Left 2 !.lib TIP122.LIB
