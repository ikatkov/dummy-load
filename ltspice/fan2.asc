Version 4
SHEET 1 880 680
WIRE -608 -288 -608 -320
WIRE -448 -288 -448 -320
WIRE -304 -288 -304 -320
WIRE 656 -96 656 -144
WIRE 656 -96 592 -96
WIRE 592 -80 592 -96
WIRE -608 -64 -608 -96
WIRE 208 -48 208 -80
WIRE 208 -48 96 -48
WIRE 304 -48 208 -48
WIRE 480 -48 304 -48
WIRE 304 -32 304 -48
WIRE 480 0 480 -48
WIRE 592 16 592 -16
WIRE 656 16 656 -16
WIRE 656 16 592 16
WIRE 656 48 656 16
WIRE 96 64 96 -48
WIRE 64 80 32 80
WIRE 96 80 96 64
WIRE 304 96 304 48
WIRE 304 96 128 96
WIRE 320 96 304 96
WIRE 400 96 320 96
WIRE 64 112 32 112
WIRE 480 128 480 80
WIRE 608 128 480 128
WIRE 400 176 400 96
WIRE 416 176 400 176
WIRE -608 208 -608 176
WIRE 32 256 32 112
WIRE 128 256 32 256
WIRE 304 256 304 96
WIRE 304 256 208 256
WIRE 480 272 480 224
WIRE 656 272 656 144
WIRE 656 272 480 272
WIRE 656 288 656 272
FLAG -448 -208 0
FLAG -448 -320 vcc5
FLAG 96 128 0
FLAG 32 80 real-temp
FLAG -304 -208 0
FLAG -304 -320 temp-ref
FLAG -48 112 temp-ref
FLAG 656 288 0
FLAG 656 -144 raw
FLAG -608 -208 0
FLAG -608 -320 v-ref
FLAG 208 -80 vcc5
FLAG -608 16 0
FLAG -608 -96 raw
FLAG -608 288 0
FLAG -608 176 real-temp
FLAG 320 96 out
SYMBOL voltage -448 -304 R0
WINDOW 3 26 104 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value 5
SYMATTR InstName V2
SYMBOL OpAmps\\opamp2 96 32 R0
SYMATTR InstName U1
SYMATTR Value LM393
SYMBOL res 48 96 R90
WINDOW 0 53 99 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res 224 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 33k
SYMBOL voltage -304 -304 R0
WINDOW 3 26 104 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value 2.45
SYMATTR InstName V1
SYMBOL res 288 -48 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 640 -112 R0
SYMATTR InstName R_FAN
SYMATTR Value 40
SYMBOL diode 608 -16 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL nmos 608 48 R0
SYMATTR InstName M1
SYMATTR Value 2N7002
SYMBOL voltage -608 -304 R0
WINDOW 3 26 104 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value 4.55
SYMATTR InstName V3
SYMBOL voltage -608 -80 R0
WINDOW 3 26 104 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value 12
SYMATTR InstName V4
SYMBOL voltage -608 192 R0
WINDOW 3 26 104 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PWL(0 2 1 3 2 2)
SYMATTR InstName V5
SYMBOL npn 416 128 R0
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL res 464 -16 R0
SYMATTR InstName R1
SYMATTR Value 10k
TEXT 184 -360 Left 2 !.tran 2
TEXT 184 -392 Left 2 !.lib LM393.lib
TEXT -304 8 Left 2 ;2.09V ~0C\n2.90V ~120C
TEXT -128 8 Left 2 ;2.38V ~40C\n2.52V ~60C
TEXT 480 -368 Left 2 ;in:\n+7V (raw)\n+5V\nGND\nreal-temp\nb-ref
TEXT 648 -368 Left 2 ;out:\nfan1\nfan2
